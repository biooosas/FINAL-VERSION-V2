<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Windows-style Media Player</title>
  <style>
    :root{
      --bg-colors: #071028, #071733;
      --panel: rgba(0,0,0,0.6);
      --accent:#1f6feb;
      --muted:#94a3b8;
      --glass:rgba(255,255,255,0.05);
    }
    html,body{
      height:100%;margin:0;font-family:Segoe UI, Roboto, Arial, sans-serif;
      background:linear-gradient(270deg,var(--bg-colors));
      background-size:600% 600%;
      animation:bgAnim 20s ease infinite;
      color:#e6edf3;
      transition:background 2s ease;
    }
    @keyframes bgAnim {
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    .player{width:1000px;max-width:98%;margin:28px auto;border-radius:12px;overflow:hidden;box-shadow:0 8px 30px rgba(0,0,0,0.6);display:grid;grid-template-columns:260px 1fr 260px;gap:12px;padding:16px;background:var(--panel);backdrop-filter:blur(12px);transition:background 2s ease;}
    .left, .right{background:var(--panel);border-radius:8px;padding:12px;min-height:420px;transition:background 2s ease;backdrop-filter:blur(8px);}
    .center{background:var(--panel);border-radius:8px;padding:18px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;transition:background 2s ease;backdrop-filter:blur(8px);}
    h3{margin:8px 0 12px;font-size:14px;color:var(--muted)}
    .library-list, .playlist-list{max-height:320px;overflow:auto;padding:6px;border-radius:6px;background:var(--glass);transition:background 2s ease;}
    .track{padding:8px;border-radius:6px;display:flex;align-items:center;gap:8px;cursor:pointer}
    .track:hover{background:rgba(255,255,255,0.08)}
    .track.active{background:linear-gradient(90deg, rgba(31,111,235,0.3), rgba(31,111,235,0.15));outline:1px solid rgba(31,111,235,0.25)}
    .controls{display:flex;align-items:center;gap:12px;margin-top:18px}
    button{background:transparent;border:0;color:inherit;padding:8px;border-radius:8px;cursor:pointer;transition:background 0.3s ease;}
    .btn-big{background:linear-gradient(90deg,var(--accent),#60a5fa);padding:12px 18px;color:#04293a;font-weight:600;border-radius:10px}
    .big-art{width:320px;height:320px;border-radius:8px;background:var(--glass);display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:14px;transition:background 2s ease;}
    .meta{margin-top:12px;text-align:center}
    .progress{width:100%;height:8px;background:rgba(255,255,255,0.08);border-radius:8px;margin-top:14px;cursor:pointer}
    .progress > .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#60a5fa);border-radius:8px}
    .flex-row{display:flex;gap:8px;align-items:center}
    input[type=file]{display:none}
    .small{font-size:13px;color:var(--muted)}
    .top-actions{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .search{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:transparent;color:inherit}
    .playlist-controls{display:flex;gap:8px;margin-top:10px}
    .youtube-box{display:flex;gap:6px}
    iframe{width:100%;height:360px;border:0;border-radius:8px}
    .settings{margin-top:12px;padding:8px;background:var(--glass);border-radius:8px}
    .settings h3{margin-top:0}
    @media (max-width:980px){.player{grid-template-columns:1fr;grid-auto-rows:min-content}}
  </style>
</head>
<body>
  <div class="player" role="application" aria-label="Media player">
    <div class="left">
      <h3>Library</h3>
      <div class="top-actions">
        <label class="btn"><input id="fileInput" type="file" multiple accept="audio/*"/>üìÅ Add files</label>
        <button id="addYoutubeBtn">‚ñ∂ Add YouTube</button>
        <button id="saveExport">‚¨á Export JSON</button>
      </div>
      <div style="margin-top:10px"><input id="filter" class="search" placeholder="Filter library..."/></div>
      <div class="library-list" id="libraryList" aria-live="polite"></div>

      <div class="settings">
        <h3>Background</h3>
        <select id="bgPreset">
          <option value="default">Default</option>
          <option value="red">Black ‚Üí Red ‚Üí Black</option>
          <option value="green">Black ‚Üí Green ‚Üí Black</option>
          <option value="gray">Black ‚Üí Gray ‚Üí Black</option>
          <option value="blue">Black ‚Üí Blue ‚Üí Black</option>
          <option value="purple">Black ‚Üí Purple ‚Üí Black</option>
          <option value="custom">Custom</option>
        </select>
        <div id="customColors" style="margin-top:6px;display:none">
          <label>Color 1: <input type="color" id="color1" value="#000000"></label>
          <label>Color 2: <input type="color" id="color2" value="#ff0000"></label>
          <label>Color 3: <input type="color" id="color3" value="#000000"></label>
        </div>
      </div>
    </div>

    <div class="center">
      <div class="big-art" id="bigArt">No track selected</div>
      <div class="meta">
        <div id="trackTitle" style="font-weight:600">‚Äî</div>
        <div id="trackArtist" class="small">‚Äî</div>
      </div>

      <div class="controls">
        <button id="prev">‚èÆ</button>
        <button id="playPause" class="btn-big">Play</button>
        <button id="next">‚è≠</button>
        <div style="flex:1"></div>
        <button id="loop">Loop: All</button>
        <button id="shuffle">Shuffle</button>
      </div>

      <div class="progress" id="progress">
        <div class="bar" id="progressBar"></div>
      </div>
      <div style="width:100%;display:flex;justify-content:space-between;margin-top:8px;color:var(--muted)">
        <div id="currentTime">0:00</div>
        <div id="duration">0:00</div>
      </div>

      <audio id="audio" preload="metadata"></audio>
      <div id="youtubeContainer" style="width:100%;display:none;margin-top:12px"></div>
    </div>

    <div class="right">
      <h3>Playlist</h3>
      <div class="playlist-controls">
        <button id="addToPlaylist">+ Add selected</button>
        <button id="clearPlaylist">Clear</button>
        <button id="savePlaylist">Save</button>
      </div>
      <div class="playlist-list" id="playlistList"></div>
    </div>
  </div>

  <script>
    const bgPreset = document.getElementById('bgPreset');
    const customColors = document.getElementById('customColors');
    const c1 = document.getElementById('color1');
    const c2 = document.getElementById('color2');
    const c3 = document.getElementById('color3');

    function setBackground(type){
      let colors;
      switch(type){
        case 'red': colors=['#000000','#ff0000','#000000']; break;
        case 'green': colors=['#000000','#00ff00','#000000']; break;
        case 'gray': colors=['#000000','#888888','#000000']; break;
        case 'blue': colors=['#000000','#0000ff','#000000']; break;
        case 'purple': colors=['#000000','#800080','#000000']; break;
        case 'custom': colors=[c1.value,c2.value,c3.value]; break;
        default: colors=['#071028','#071733'];
      }
      document.documentElement.style.setProperty('--bg-colors', colors.join(','));
      document.documentElement.style.setProperty('--panel', `rgba(0,0,0,0.6)`);
      document.documentElement.style.setProperty('--glass', `linear-gradient(180deg, ${colors[0]}55, ${colors[1]}33)`);
    }

    bgPreset.addEventListener('change', ()=>{
      if(bgPreset.value==='custom') customColors.style.display='block'; else customColors.style.display='none';
      setBackground(bgPreset.value);
      localStorage.setItem('bgPreset', bgPreset.value);
      if(bgPreset.value==='custom'){
        localStorage.setItem('customColors', JSON.stringify([c1.value,c2.value,c3.value]));
      }
    });
    [c1,c2,c3].forEach(inp=> inp.addEventListener('input', ()=>{
      if(bgPreset.value==='custom'){
        setBackground('custom');
        localStorage.setItem('customColors', JSON.stringify([c1.value,c2.value,c3.value]));
      }
    }));

    window.addEventListener('DOMContentLoaded', ()=>{
      const preset = localStorage.getItem('bgPreset')||'default';
      bgPreset.value=preset;
      if(preset==='custom'){
        customColors.style.display='block';
        const saved = JSON.parse(localStorage.getItem('customColors')||'["#000000","#ff0000","#000000"]');
        [c1.value,c2.value,c3.value]=saved;
      }
      setBackground(preset);
    });
  </script>

  <script>
    // (player logic here unchanged, omitted for brevity)
  </script>
</body>
</html>
